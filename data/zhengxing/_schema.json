{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "證型結構定義",
  "description": "證型是證素的組合，由病位證素和病性證素組合而成",
  "type": "object",
  "required": ["id", "name", "zhengsu_composition", "symptoms", "treatment_principle"],
  "properties": {
    "id": {
      "type": "string",
      "description": "唯一識別碼（拼音格式）"
    },
    "name": {
      "type": "string",
      "description": "證型名稱"
    },
    "alias": {
      "type": "array",
      "items": { "type": "string" },
      "description": "別名列表"
    },
    "zhengsu_composition": {
      "type": "object",
      "description": "證素組成",
      "properties": {
        "location": {
          "type": "array",
          "items": { "type": "string" },
          "description": "病位證素 ID 列表"
        },
        "nature": {
          "type": "array",
          "items": { "type": "string" },
          "description": "病性證素 ID 列表"
        }
      },
      "required": ["location", "nature"]
    },
    "symptoms": {
      "type": "object",
      "description": "症狀表現",
      "properties": {
        "main": {
          "type": "array",
          "items": { "type": "string" },
          "description": "主症（症狀 ID 或文字描述）"
        },
        "secondary": {
          "type": "array",
          "items": { "type": "string" },
          "description": "次症"
        },
        "tongue": {
          "type": "string",
          "description": "舌象"
        },
        "pulse": {
          "type": "string",
          "description": "脈象"
        }
      },
      "required": ["main"]
    },
    "treatment_principle": {
      "type": "array",
      "items": { "type": "string" },
      "description": "治則治法"
    },
    "recommended_formulas": {
      "type": "array",
      "items": { "type": "string" },
      "description": "推薦方劑 ID 列表"
    },
    "recommended_herbs": {
      "type": "array",
      "items": { "type": "string" },
      "description": "推薦中藥 ID 列表"
    },
    "differentiate_from": {
      "type": "array",
      "items": { "type": "string" },
      "description": "需鑑別的其他證型 ID"
    },
    "can_evolve_to": {
      "type": "array",
      "items": { "type": "string" },
      "description": "可能演變成的證型 ID"
    },
    "evolved_from": {
      "type": "array",
      "items": { "type": "string" },
      "description": "由哪些證型演變而來"
    },
    "related_diseases": {
      "type": "array",
      "items": { "type": "string" },
      "description": "相關疾病 ID 列表"
    },
    "description": {
      "type": "string",
      "description": "證型說明"
    },
    "source": {
      "type": "string",
      "description": "文獻出處"
    },
    "clinical_variants": {
      "type": "array",
      "description": "臨床變型（同一證型的不同表現形式）",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "description": "變型名稱" },
          "cause": { "type": "string", "description": "病因" },
          "symptoms": { "type": "array", "items": { "type": "string" } },
          "treatment": { "type": "string", "description": "治法" },
          "formula": { "type": "string", "description": "方劑" },
          "formula_source": { "type": "string", "description": "方劑出處" }
        }
      }
    },
    "differentiation": {
      "type": "array",
      "description": "類證鑑別（詳細比較）",
      "items": {
        "type": "object",
        "properties": {
          "compare_with": { "type": "string", "description": "比較證型 ID" },
          "compare_name": { "type": "string", "description": "比較證型名稱" },
          "similarities": { "type": "array", "items": { "type": "string" }, "description": "相同點" },
          "differences": {
            "type": "object",
            "properties": {
              "this_pattern": { "type": "string", "description": "本證特點" },
              "other_pattern": { "type": "string", "description": "彼證特點" }
            }
          },
          "key_points": { "type": "array", "items": { "type": "string" }, "description": "鑑別要點" }
        }
      }
    },
    "literature": {
      "type": "array",
      "description": "文獻選錄",
      "items": {
        "type": "object",
        "properties": {
          "source": { "type": "string", "description": "出處" },
          "quote": { "type": "string", "description": "原文" }
        }
      }
    },
    "pathogenesis": {
      "type": "string",
      "description": "病機概述"
    },
    "common_in": {
      "type": "array",
      "items": { "type": "string" },
      "description": "常見於哪類人群"
    }
  }
}
